{"version":3,"sources":["assets\\Script\\buttle2.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;AAClF,2CAAsC;AAChC,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAG5C;IAAqC,2BAAU;IAD/C;QAAA,qEAoCC;QAlCC,kBAAY,GAAY,IAAI,CAAC;;IAkC/B,CAAC;IAhCC,sBAAI,GAAJ,UAAK,IAAI;QACP,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,SAAS,GAAY,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC;QAC1D,IAAI,SAAS,GAAY,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QACjD,IAAI,CAAC,YAAY,GAAG,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,SAAS,EAAE,CAAC;QAC9D,wBAAwB;QACxB,IAAI,CAAC,IAAI,CAAC,KAAK;YACb,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,YAAY,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,EAAE,CAAC;IAC/D,CAAC;IAED,wBAAM,GAAN,UAAO,EAAE;QACP,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAC3D,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QAC3D,IAAI,CAAC,KAAK,EAAE,CAAC;QAEb,IAAI,IAAI,CAAC,iBAAiB,EAAE,GAAG,IAAI,CAAC,OAAO,EAAE;YAC3C,IAAI,CAAC,QAAQ,EAAE,CAAC;YAChB,OAAO;SACR;IACH,CAAC;IAED,uBAAK,GAAL;QACE,IACE,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK;YACnC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM;YACpC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK;YAClC,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EACnC;YACA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAC;YACpB,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC;SACxB;IACH,CAAC;IAlCkB,OAAO;QAD3B,OAAO;OACa,OAAO,CAmC3B;IAAD,cAAC;CAnCD,AAmCC,CAnCoC,oBAAU,GAmC9C;kBAnCoB,OAAO","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\nimport BaseButtle from \"./BaseButtle\";\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Buttle2 extends BaseButtle {\r\n  normalizeVec: cc.Vec2 = null;\r\n\r\n  init(game) {\r\n    this.game = game;\r\n    let targetPos: cc.Vec2 = this.game.airPlane.getPosition();\r\n    let bulletPos: cc.Vec2 = this.node.getPosition();\r\n    this.normalizeVec = targetPos.subtract(bulletPos).normalize();\r\n    // 角度变化以y轴正方向为起点，逆时针角度递增\r\n    this.node.angle =\r\n      (cc.v2(0, 1).signAngle(this.normalizeVec) * 180) / Math.PI;\r\n  }\r\n\r\n  update(dt) {\r\n    this.node.x += this.normalizeVec.x * this.bulletSpeed * dt;\r\n    this.node.y += this.normalizeVec.y * this.bulletSpeed * dt;\r\n    this.check();\r\n\r\n    if (this.getPlayerDistance() < this.collied) {\r\n      this.onPicked();\r\n      return;\r\n    }\r\n  }\r\n\r\n  check() {\r\n    if (\r\n      this.node.x < -this.game.size.width ||\r\n      this.node.y < -this.game.size.height ||\r\n      this.node.x > this.game.size.width ||\r\n      this.node.y > this.game.size.height\r\n    ) {\r\n      this.node.destroy();\r\n      this.game.putBullet2();\r\n    }\r\n  }\r\n}\r\n"]}